<?xml version="1.0"?>
<!DOCTYPE database SYSTEM "http://db.apache.org/torque/dtd/database.dtd">
<database name="testdb">
	<table name="author">
		<column name="author_id"
			type="INTEGER"
			primaryKey="true"
			required="true"/>
		<column name="name"
			type="VARCHAR"
			size="50"
			required="true"/>
		<column name="organisation"
			type="VARCHAR"
			size="50"
			required="false"/>
	</table>
	
	<table name="book">
		<column name="book_id"
			type="INTEGER"
			required="true"
			primaryKey="true"
			autoIncrement="true"/>
		<column name="isbn"
			type="VARCHAR"
			size="15"
			required="true"/>
		<column name="author_id"
			type="INTEGER"
			required="true"/>
		<column name="title"
			type="VARCHAR"
			size="255"
			defaultValue="N/A"
			required="true"/>
		
		<foreign-key foreignTable="author">
			<reference local="author_id" foreign="author_id"/>
		</foreign-key>  
		
		<index name="book_isbn">
			<index-column name="isbn"/>
		</index>

		<index name="book_author_title">
			<index-column name="author_id"/>
			<index-column name="title_id"/>
		</index>
	</table>
	
	<table name="ID_TABLE">
		<column name="ID_TABLE_ID" required="true" primaryKey="true" type="INTEGER"/>
		<column name="TABLE_NAME" required="true" size="255" type="VARCHAR"/>
		<column name="NEXT_ID" type="INTEGER"/>
		<column name="QUANTITY" type="INTEGER"/>
		
		<unique>
			<unique-column name="TABLE_NAME"/>
		</unique>
		
	</table>
	
	<table name="TURBINE_PERMISSION" idMethod="idbroker">
		<column name="PERMISSION_ID" required="true" primaryKey="true" type="INTEGER"/>
		<column name="PERMISSION_NAME" required="true" size="99" type="VARCHAR" javaName="Name"/>
		
		<unique>
			<unique-column name="PERMISSION_NAME"/>
		</unique>
		
	</table>
	
	<table name="TURBINE_ROLE_PERMISSION">
		<column name="ROLE_ID" required="true" type="INTEGER"/>
		<column name="PERMISSION_ID" required="true" primaryKey="true" type="INTEGER"/>
		
		<foreign-key foreignTable="TURBINE_ROLE">
			<reference local="ROLE_ID" foreign="ROLE_ID"/>
		</foreign-key>
		
		<foreign-key foreignTable="TURBINE_PERMISSION">
			<reference local="PERMISSION_ID" foreign="PERMISSION_ID"/>
		</foreign-key>
	</table>
</database>
